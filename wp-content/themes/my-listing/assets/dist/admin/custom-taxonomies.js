!function(t){"function"==typeof define&&define.amd?define("customTaxonomies",t):t()}(function(){"use strict";function t(){this.addButton=s("#c27-add-taxonomy"),this.container=s("#c27-custom-taxonomies"),void 0===c27_custom_taxonomies.taxonomies&&(c27_custom_taxonomies.taxonomies=[]),this.addTaxonomy(c27_custom_taxonomies.taxonomies),this.bindEvents(),s("#settings-taxonomies .taxonomy-fields").sortable()}var s;s=jQuery,t.prototype={Window:s(window),form:[],bindEvents:function(){this.addButton.on("click",s.proxy(this.onButtonClick,this)),this.container.on("click","[data-delete-btn]",s.proxy(this.deleteTaxonomy,this)),this.container.on("keyup","input[data-field-label]",s.proxy(this.updateLabel,this))},onButtonClick:function(t){t.preventDefault(),this.addTaxonomy()},onSubmit:function(t){var n=this.container.find(":input"),o=!1;n.removeClass("required-field");for(var e=0;e<=n.length;++e){var a=s(n[e]);s(a).val()||(a.addClass("required-field"),o=!0)}o&&(t.preventDefault(),alert(c27_custom_taxonomies.requiredMsg))},addTaxonomy:function(t){var n;t=t||[{slug:"",label:"",can_edit_slug:!0}],n=wp.template("c27-custom-taxonomies")({taxonomies:t,count:this.container.children().length}),this.container.append(n)},deleteTaxonomy:function(t){t.preventDefault();var n=s(t.currentTarget);if(confirm(c27_custom_taxonomies.deleteMsg)){n.parents("div[data-taxonomy]:first").remove();var o=this.container.children("div[data-taxonomy]");o.length||this.addTaxonomy(),o.each(function(o){s(this).find(":input").each(function(){var t=s(this),n=t.attr("name");t.attr("name",n.replace(/job_manager_custom_taxonomy\[(\d+)\]/,"job_manager_custom_taxonomy["+o+"]"))})})}},updateLabel:function(t){var n=s(t.currentTarget),o=n.parents(".head-button:first"),e=o.find("span[data-label]"),a=o.find("input[data-field-slug]"),i=n.val();e.text(i),a.prop("readonly")||a.val(this._toSlug(i))},_toSlug:function(t){return(t=s.trim(t.toLowerCase().replace(/([^a-z0-9])/gi," ",t))).replace(/\s+/g,"-",t)}},s(document).ready(function(){new t})});

//# sourceMappingURL=custom-taxonomies.js.map
